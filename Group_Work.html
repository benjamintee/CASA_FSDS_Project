<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-12-13">

<title>The Pythoneers’ Group Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="Group_Work_files/libs/clipboard/clipboard.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Group_Work_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Group_Work_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Group_Work_files/libs/quarto-html/popper.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Group_Work_files/libs/quarto-html/anchor.min.js"></script>
<link href="Group_Work_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Group_Work_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Group_Work_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Group_Work_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Group_Work_files/libs/bootstrap/bootstrap-31d999dcaf6115831424ead65ddf8310.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#priorities-for-feedback" id="toc-priorities-for-feedback" class="nav-link active" data-scroll-target="#priorities-for-feedback">Priorities for Feedback</a></li>
  <li><a href="#finding-a-balance-airbnbs-growth-impact-and-benefits-for-london" id="toc-finding-a-balance-airbnbs-growth-impact-and-benefits-for-london" class="nav-link" data-scroll-target="#finding-a-balance-airbnbs-growth-impact-and-benefits-for-london">Finding a balance: Airbnb’s growth, impact and benefits for London</a>
  <ul class="collapse">
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link" data-scroll-target="#executive-summary">Executive Summary</a></li>
  <li><a href="#is-airbnb-out-of-control-in-london" id="toc-is-airbnb-out-of-control-in-london" class="nav-link" data-scroll-target="#is-airbnb-out-of-control-in-london">1. Is Airbnb ‘out of control’ in London?</a></li>
  <li><a href="#taking-back-control" id="toc-taking-back-control" class="nav-link" data-scroll-target="#taking-back-control">2. Taking back “control”?</a></li>
  <li><a href="#evaluating-the-oppositions-proposal" id="toc-evaluating-the-oppositions-proposal" class="nav-link" data-scroll-target="#evaluating-the-oppositions-proposal">3. Evaluating the opposition’s proposal</a></li>
  <li><a href="#weighing-up-the-way-ahead-pros-cons-and-social-mobility" id="toc-weighing-up-the-way-ahead-pros-cons-and-social-mobility" class="nav-link" data-scroll-target="#weighing-up-the-way-ahead-pros-cons-and-social-mobility">4. Weighing up the way ahead: Pros, cons and social mobility</a></li>
  <li><a href="#limitations" id="toc-limitations" class="nav-link" data-scroll-target="#limitations">5. Limitations</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Group_Work.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Pythoneers’ Group Project</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 13, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="declaration-of-authorship" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="declaration-of-authorship">Declaration of Authorship</h2>
<p>We, The Pythoneers, pledge our honour that the work presented in this assessment is our own. Where information has been derived from other sources, we confirm that this has been indicated in the work. Where a Large Language Model such as ChatGPT has been used we confirm that we have made its contribution to the final submission clear.</p>
<p>Date: 16 December 2025 (Tuesday)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Names</th>
<th>Student Numbers</th>
<th>Contact Email</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Alice Southall</td>
<td>25120600</td>
<td>alice.southall.25@ucl.ac.uk</td>
</tr>
<tr class="even">
<td>Benjamin Tee</td>
<td>25049107</td>
<td>benjamin.tee.25@ucl.ac.uk</td>
</tr>
<tr class="odd">
<td>Bosco Choi</td>
<td>22040212</td>
<td>bosco.choi.22@ucl.ac.uk</td>
</tr>
<tr class="even">
<td>Owen Hughes</td>
<td>25197128</td>
<td>owen.hughes.25@ucl.ac.uk</td>
</tr>
<tr class="odd">
<td>Tong, C.Y</td>
<td>25244321</td>
<td>c.tong.25@ucl.ac.uk</td>
</tr>
</tbody>
</table>
<p>Full code and data can be found at the attached (<a href="https://github.com/benjamintee/CASA_FSDS_Project" class="uri">https://github.com/benjamintee/CASA_FSDS_Project</a>)</p>
<p>Web-friendly HTML version can be found at the following (<a href="https://benjamintee.github.io/CASA_FSDS_Project/Group_Work.html" class="uri">https://benjamintee.github.io/CASA_FSDS_Project/Group_Work.html</a>)</p>
</section>
<section id="priorities-for-feedback" class="level2">
<h2 class="anchored" data-anchor-id="priorities-for-feedback">Priorities for Feedback</h2>
<p>(Include write-up here on areas for feedback)</p>
<div style="page-break-after: always;"></div>
</section>
<section id="finding-a-balance-airbnbs-growth-impact-and-benefits-for-london" class="level1">
<h1>Finding a balance: Airbnb’s growth, impact and benefits for London</h1>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary">Executive Summary</h2>
<p>The opposition’s proposal is likely to gain some traction due to public awareness of recent protests and measures taken against Airbnb in other holiday destinations <span class="citation" data-cites="hedgecoe2025">(<a href="#ref-hedgecoe2025" role="doc-biblioref">Hedgecoe, 2025</a>)</span>, and a perception (due to repeated promises by more than one UK government to build more housing) that there is a shortage of housing in the UK <span class="citation" data-cites="mhclg2024">(<a href="#ref-mhclg2024" role="doc-biblioref">MHCLG and Rayner, 2024</a>)</span>. The discovery of the Mayor’s aide’s housing circumstances has stirred media interest, feeding into the debate about the current unbalanced housing market and suspicions of political hypocrisy <span class="citation" data-cites="mckiernan2025">(<a href="#ref-mckiernan2025" role="doc-biblioref">McKiernan and Eardley, 2025</a>)</span>.</p>
<p>While studies have investigated the potentially undesirable consequences for areas that host large proportions of Airbnb properties, such as increased crime rates and anti-social behaviour, the opposition’s proposal focuses on the impact of Airbnb on housing stock, and this report does likewise.</p>
<p>This report draws from data from Inside Airbnb<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, to evaluate the scale and nature of Airbnb’s penetration into the London property market, examining the implications and recommendations for action. We also discuss limitations of the data at the end of the report.</p>
<p>In summary, we conclude that:</p>
<ol type="1">
<li>London’s Airbnb listings have expanded faster than housing supply, particularly in inner boroughs<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, heightening market pressures and public concern.</li>
<li>Many entire-home listings exceed the 90-day limit, with potential regulatory breaches concentrated among multi-listing “professional” landlords.</li>
<li>The opposition’s proposed council tax surcharge is a blunt and politically difficult tool. Effective alternatives include landlord registration, enforcement of business rates for commercial operators or a tourist tax, which targets problematic hosts without disadvantaging ordinary residents who rely on modest hosting income.</li>
</ol>
<div style="page-break-after: always;"></div>
</section>
<section id="is-airbnb-out-of-control-in-london" class="level2">
<h2 class="anchored" data-anchor-id="is-airbnb-out-of-control-in-london">1. Is Airbnb ‘out of control’ in London?</h2>
<p>The opposition are behind the times: the increase in short-term lets and its potential to damage the housing supply is a concern that the Mayor’s office had already raised and taken concrete steps to tackle.</p>
<p>Since 2015, London landlords letting their property for more than 90 days per year have been required to obtain planning permission for a change of use. This planning permission requirement seeks to prevent permanent housing from being converted into de facto holiday accommodation. Airbnb and other equivalent platforms are therefore under far more “control” in London than in many European cities. More recently, the Mayor has proposed both a landlord registration system and a licensing system.</p>
<p>We consider below what the data reveal about</p>
<ol type="a">
<li><p>The growth of Airbnbs relative to London housing stock; and</p></li>
<li><p>Whether landlords are flouting the planning permission requirement.</p></li>
</ol>
<section id="how-have-airbnb-listings-and-housing-stock-changed" class="level4">
<h4 class="anchored" data-anchor-id="how-have-airbnb-listings-and-housing-stock-changed"><u>How have Airbnb listings and housing stock changed?</u></h4>
<p>Since 2021, London has seen a notable increase in Airbnb listings, rising from <strong>69,400</strong> to <strong>86,400</strong> listings<strong>,</strong> a <strong>24%</strong> increase (<u>Figure 1</u>).</p>
<div id="94263510" class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-12-output-1.png" width="762" height="550" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Most of the increase occurred between 2022-2023, with new listings concentrated in inner London:</p>
<ul>
<li><p>Specifically, <strong>Westminster</strong>, <strong>Camden</strong>, <strong>Southwark</strong>, <strong>Lambeth</strong> and <strong>Kensington and Chelsea</strong> saw the highest increase in listings.</p></li>
<li><p><strong>Westminster</strong> alone added <strong>2,900</strong> listings, constituting a <strong>39%</strong> increase within the borough.</p></li>
</ul>
<p>In contrast, between 2020 and 2024, London’s housing stock grew from <strong>3.68M</strong> to <strong>3.81M</strong> properties: a relatively smaller <strong>3.7%</strong> increase. <strong>Kensington and Chelsea</strong> saw <strong>5 times</strong> more new Airbnb listings than new housing stock.</p>
<div id="7bafdba0" class="cell" data-execution_count="16">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-17-output-1.png" width="762" height="541" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-is-the-situation-in-2025" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-situation-in-2025"><u>What is the situation in 2025?</u></h4>
<p>Across all London Boroughs in 2025, the average number of listings as a percentage of housing stock was <strong>1.9%</strong>, though <strong>11 Boroughs</strong> exceeded this average. These <strong>11 Boroughs</strong> were in inner London. Close to <strong>6%</strong> of total housing stock in <strong>Westminster</strong>, and <strong>Kensington and Chelsea</strong> were listed as an Airbnb (<u>Figure 3</u>). Up to <strong>1 in 8 homes</strong> in some MSOAs in inner London were listed on Airbnb (<u>Figure 4</u>).</p>
<p>The growth of Airbnb properties therefore far outstrips the rate of growth of new housing available, particularly in inner London boroughs.</p>
<p>In a tight housing market, this exacerbates pressure on housing prices and rents, driving a perception that Airbnb could be “out of control” in parts of London.&nbsp;</p>
<div id="3f849a87" class="cell" data-execution_count="18">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-19-output-1.png" width="775" height="526" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="83e11832" class="cell" data-execution_count="20">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-21-output-1.png" width="763" height="589" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="are-hosts-flouting-the-regulations" class="level4">
<h4 class="anchored" data-anchor-id="are-hosts-flouting-the-regulations"><u>Are hosts flouting the regulations?</u></h4>
<p>Based on occupancy estimates<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, <strong>12,100 entire homes / apartments</strong> were used for 90 or more nights per year (“frequent lets”). This represented <strong>more than 1 in 5 of all entire homes listings</strong>, and <strong>1 in 8 of all listings in London</strong>.</p>
<p>Again, inner London boroughs showed the highest rates of intense use. <strong>Westminster, Camden and Islington</strong> had <strong>27%, 25% and 23%</strong> of entire home listings as frequent lets respectively.</p>
<p>Notwithstanding the sensitivity of assumptions<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, we expect this to be a conservative estimate, given the reported likelihood of multiple listings of the same property, which some owners have used to circumvent the 90 day rule <span class="citation" data-cites="benjamin2025">(<a href="#ref-benjamin2025" role="doc-biblioref">Benjamin and Lynn, 2025</a>)</span>.</p>
<p>One action that could be taken in response to the opposition’s claims is to investigate how many of these listings are compliant with the planning permission requirement, and step up enforcement action against hosts in breach.</p>
</section>
</section>
<section id="taking-back-control" class="level2">
<h2 class="anchored" data-anchor-id="taking-back-control">2. Taking back “control”?</h2>
<p>The opposition proposes that “professional” landlords’ properties should be subject to registration and increased council tax. As above, the Mayor’s office has already proposed a registration system for landlords, and this should be made clear in any response to the opposition.</p>
<p>The opposition has not defined “professional” landlord nor provided details on how its proposal would be implemented. We attempt to define and scope this to aid a proper response.</p>
<section id="what-is-a-professional-landlord" class="level4">
<h4 class="anchored" data-anchor-id="what-is-a-professional-landlord"><u>What is a professional landlord?</u></h4>
<p>Studies suggest that a company or individual that owns and operates 2 or more entire homes can be classed as a commercial or professional landlord. Such “multi-listing hosts” are significant drivers of increase in rent and of Airbnb’s profit in London <span class="citation" data-cites="todd2021 cox2016">(<a href="#ref-cox2016" role="doc-biblioref">Cox and Slee, 2016</a>; <a href="#ref-todd2021" role="doc-biblioref">Todd, Musah and Cheshire, 2021</a>)</span>.</p>
<p>The data show that a <strong>small number of hosts are responsible for a disproportionately large number of listings</strong> (<u>Figure 5)</u>.</p>
<ul>
<li><p><strong>27,108 (85%)</strong> hosts own <u>only 1 entire property (“single-listing hosts”)</u>, and they are responsible for <strong>47%</strong> of listings.</p></li>
<li><p><strong>4,966 (15%)</strong> hosts own <u>two or more entire properties (“multi-listing hosts”)</u>, and they disproportionately make up <strong>53%</strong> of listings.</p></li>
<li><p><strong>15 (0.05%)</strong> hosts, <u>own over 100 entire properties;</u> between them, they own <strong>5%</strong> of listings.</p></li>
<li><p>Notably, a larger proportion of properties belonging to multi-listings hosts were let out for 90 or more days (“frequent lets”) <strong>(14%)</strong>, compared to properties belonging to single-listing hosts <strong>(7%)</strong>.</p></li>
</ul>
<div id="acf0cb25" class="cell" data-execution_count="24">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-25-output-1.png" width="755" height="488" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Therefore, using the two-property threshold, <strong>15%</strong> of Airbnb hosts currently letting entire homes in London would be treated as “professional” landlords.</p>
<p>We test the robustness of this analysis in a London context by:&nbsp;</p>
<ul>
<li><p>Establishing the income earned from renting out entire homes on Airbnb.&nbsp;</p></li>
<li><p>Comparing this with annual median income of Londoners<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, <strong>£34,100</strong>, on the basis that a host earning this much could, in theory, treat this as their sole employment.</p></li>
</ul>
<p>Based on estimated revenues<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>,</p>
<ul>
<li><p>The median single-listing host renting out their home for “standard lets” earned <strong>£4,858</strong> a year per property, while the median multi-listing host earned <strong>£5,600</strong>.</p></li>
<li><p>The median single-listing “frequent lets” host earned <strong>£24,000</strong> a year per property, while multi-listing “frequent lets” hosts earned <strong>£30,300</strong>.</p></li>
</ul>
<div id="d3168de3" class="cell" data-execution_count="28">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-29-output-1.png" width="765" height="521" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Using the more conservative income from single-listing hosts on standard lets, <strong>£4,858</strong>, <strong>owning 7 properties</strong> becomes the threshold to make more than the London median income.</p>
<p>However, with frequent lets, <strong>owning 1 properties</strong> is sufficient to make close to double the median income of London. Just <strong>two properties</strong> can generate nearly double the median income of London. Under this analysis:</p>
<ul>
<li><p>Categorising any host owning two or more entire properties as a “professional” landlord is a defensible position.</p></li>
<li><p>The aide at the center of the current controversy would be classed as a “professional” landlord, which the Mayor should be mindful of when responding.</p></li>
</ul>
<p>If the opposition’s proposal were implemented using the above definition of “professional” hosts, <strong>30,446</strong> properties would be subject to increased council tax, constituting <strong>53%</strong> of all entire homes listings.</p>
</section>
<section id="who-are-londons-professional-landlords" class="level4">
<h4 class="anchored" data-anchor-id="who-are-londons-professional-landlords"><u>Who are London’s “professional” landlords?</u></h4>
<p>Most of both single <strong>(76%)</strong> and multi-listing <strong>(68%)</strong> hosts are UK-based. However, at least one of the hosts who owns over 100 properties is a company based abroad (Dubai). Three others have names suggesting that they are companies.</p>
<p><strong>21%</strong> of hosts do not provide a host location. This provides strong impetus for the Mayor to engage Airbnb to improve host registration and enforcement.</p>
</section>
</section>
<section id="evaluating-the-oppositions-proposal" class="level2">
<h2 class="anchored" data-anchor-id="evaluating-the-oppositions-proposal">3. Evaluating the opposition’s proposal</h2>
<section id="is-council-tax-an-appropriate-additional-control" class="level4">
<h4 class="anchored" data-anchor-id="is-council-tax-an-appropriate-additional-control"><u>Is council tax an appropriate additional control?</u></h4>
<p>The viability of the opposition’s proposal relies on generating a fiscally significant income stream to moderate disamenities arising from the high proportion of Airbnb properties in London. They suggest relying on the council tax system.</p>
<p>Council tax applies to a property’s domestic classification, based on its 1991 valuation. All properties in the same band currently pay the same rate of council tax, unless an exemption applies. It is therefore not a mechanism designed to assess current commercial use or income, making it a blunt instrument for targeted market intervention.</p>
<p>The opposition do not explain how the council tax system might be adjusted. Notwithstanding, we note that the recent 2025 Budget outlines plans to modify the council tax system from 2028 to apply a surcharge on luxury properties, using 2026 valuations<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. This suggests greater directional flexibility in the system than historically possible, and further work to “piggyback” on these changes could be explored.</p>
<p>To illustrate potential revenues from council tax adjustments, we calculated the estimated revenue increase based on a <strong>2% - 10%</strong> <strong>premium</strong> applied to the current council tax Band D rate<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> for all properties operated by “professional” landlords.</p>
<div class="{=latex}">

</div>
<p>Source: London Datastore, Council tax charges and bands by borough.<br>
Note: A conservative range of 2%, 5%, and 10% was chosen for simulation, given the requirement that councils proposing a &gt;5% increase must hold a successful local referendum.</p>
<p>The opposition proposal could yield between <strong>£1.0m</strong> and <strong>£5.1m</strong>. Inner London boroughs, the focus of much of this debate, account for <strong>£0.7m</strong> to <strong>£3.7m</strong> of this total.</p>
<p>The spatial concentration of potential revenue could allow the Mayor to justify the policy as one specifically taxing central areas, where commercial exploitation of housing stock is most acute, rather than a blanket tax rise across London (<u>Figure 7</u>).&nbsp;</p>
<p>However, the political viability and implementation logistics of this change remain to be determined:</p>
<ul>
<li><p>A targeted surcharge affecting “professional” Airbnb hosts (in the manner of the Budget’s “Mansion Tax” surcharge) is likely to see far less pushback than a general increase in council tax for all properties.</p></li>
<li><p>Determining which bands should be affected is not straightforward, as properties of all types and values are available for short-term let on Airbnb and other platforms.</p></li>
</ul>
<div id="e89038d4" class="cell" data-execution_count="33">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-34-output-1.png" width="795" height="478" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="can-we-do-better" class="level4">
<h4 class="anchored" data-anchor-id="can-we-do-better"><u><strong>Can we do better?</strong></u></h4>
<p>Given that some of the existing Airbnb hosts are companies, and that a great deal more would be required to register as “professional” landlords if some form of the Mayor’s (and opposition’s) proposals were carried out, an alternative that relies on an existing regulatory infrastructure might be <u>business rates</u>.</p>
<ul>
<li><p>Business rates are triggered when a property is used for commercial purposes and are designed to identify commercial exploitation that should be liable to taxation.</p></li>
<li><p>The business rates requirement for short-term lets is that they must be registered once the threshold of, typically, 140 days of availability per year <span class="citation" data-cites="gov.ukn.d">(<a href="#ref-gov.ukn.d" role="doc-biblioref"><strong>gov.ukn.d?</strong></a>)</span> is reached. However, in practice there is room to improve enforcement, and implement tougher deterrent fines for errant landlords.</p></li>
<li><p>There is, therefore, a mismatch between the planning permission requirement and the business rates requirement in terms of when registration is required, which should be closed if this avenue were explored.</p></li>
</ul>
<p>Another option is to introduce a form of “<u>tourist tax</u>”, a common approach in other countries. The Hackney Citizen estimates that such a measure could raise <strong>£240 million a year</strong> and, if implemented with care, would not necessarily reduce visitor numbers <span class="citation" data-cites="jaffer2025">(<a href="#ref-jaffer2025" role="doc-biblioref">Jaffer, 2025</a>)</span>. This would be more targeted and easily administered, without relying on property valuations or enforcement against reluctant or elusive landlords.</p>
</section>
</section>
<section id="weighing-up-the-way-ahead-pros-cons-and-social-mobility" class="level2">
<h2 class="anchored" data-anchor-id="weighing-up-the-way-ahead-pros-cons-and-social-mobility">4. Weighing up the way ahead: Pros, cons and social mobility</h2>
<p>While the opposition now agrees with the Mayor’s intent to curb the negative impacts of short-term lets in London, their proposal is blunt and scant on detail. It risks undermining London’s thriving tourism industry, which contributes at least <strong>£10 billion a year</strong> to London’s economy and supports around <strong>7% of London’s jobs</strong> <span class="citation" data-cites="mayoroflondon2025">(<a href="#ref-mayoroflondon2025" role="doc-biblioref">London, 2025</a>)</span>, while failing to distinguish between a small number of problematic commercial operators and the many residents who host legitimately. Moreover, London’s short letting market is already more tightly regulated than many European equivalents, and we should be mindful of over-correction (<u>Figure 8</u>).</p>
<div id="81b31002" class="cell" data-execution_count="35">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Group_Work_files/figure-html/cell-36-output-1.png" width="783" height="615" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For ordinary Londoners, hosting often provides a modest but meaningful supplement to household income, helping them manage rising living costs and maintain financial stability.</p>
<p>Research from 2022 highlights that older women living alone and women with disabilities increasingly rely on hosting as a flexible lifeline in London <span class="citation" data-cites="remap2022">(<a href="#ref-remap2022" role="doc-biblioref">REMAP, 2022</a>)</span>. Indeed, for many just renting out a room, earnings are generally modest: the median annual revenue for a private room let under 90 days is <strong>£1,650</strong> rising to around <strong>£10,800</strong> for frequent lets.&nbsp;</p>
<p>Introducing additional administrative complexity and costs through broad council tax increases would be a backward step in social mobility. While better-off “professional” hosts easily absorb the additional burden without necessarily releasing their properties onto the housing market, individual hosts may see the benefit of letting their property diminished to the point of exiting the market, to the detriment of their finances and security.</p>
<p>Our analysis has shown that the <strong>key problems are concentrated among a subset of professional operators in specific boroughs</strong>. A blanket approach such as raising council tax for all would therefore penalise responsible hosts while doing little to address true sources of pressure. <strong>Instead, a targeted strategy, which could combine a tourist tax with a focus on ensuring that professional landlords are registered and paying business rates would be more proportionate, effective, and better aligned</strong> with the Mayor’s aim of reducing harm, without compromising London’s vibrancy or the livelihoods of ordinary residents. &nbsp;</p>
<p>Some short-term embarrassment stemming from the aide’s circumstances is unavoidable. To maintain public trust, the Mayor should commission an independent investigation, and take disciplinary action if wrongdoing is found. The opposition’s proposal is not a wholly bad development. Given similarities with existing Mayoral initiatives, this presents an opportunity for the Mayor’s office to ride on bipartisan support to implement more progressive tax changes.&nbsp;</p>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">5. Limitations</h2>
<section id="inside-airbnb-dataset-insideairbnb" class="level4">
<h4 class="anchored" data-anchor-id="inside-airbnb-dataset-insideairbnb"><u><strong>Inside Airbnb dataset</strong></u> <span class="citation" data-cites="insideairbnb">(<a href="#ref-insideairbnb" role="doc-biblioref">InsideAirbnb, no date</a>)</span>&nbsp;</h4>
<p>Apart from the limitations of the occupancy estimates previously mentioned, it is possible that listing numbers are underestimated in the cleaning process in response to inaccuracies in scraping. Moreover, the dataset is only a snapshot in time. Since listings can be added or deleted, seasonal/temporary listings might be over/under- represented.&nbsp;</p>
<p>Our methodology also does not tell how many frequently let properties have legitimate planning permissions. If we have more time, we can connect to the Planning London Datahub’s public API and extract the number of short-term let permissions to provide an estimate. As short-term let falls into “sui generis” rather than an independent use class, the only way to filter them out is by building text regex pattern to search for them from the planning permission descriptions, which is time intensive.&nbsp;</p>
</section>
<section id="housing-stock-dataset-valuationofficeagency2024" class="level4">
<h4 class="anchored" data-anchor-id="housing-stock-dataset-valuationofficeagency2024"><u><strong>Housing stock dataset</strong></u> <span class="citation" data-cites="valuationofficeagency2024">(<a href="#ref-valuationofficeagency2024" role="doc-biblioref">Agency, 2024</a>)</span></h4>
<p>Using a raw stock of properties dataset to normalise Airbnb listings can overlook variations in housing stock. Some areas can have less Airbnb-eligible dwellings (eg. care homes), and some areas can have higher vacancy rates than others. &nbsp;</p>
</section>
</section>
<section id="references" class="level2 unnumbered">


</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-valuationofficeagency2024" class="csl-entry" role="listitem">
Agency, V. O. (2024) <span>“Council <span>Tax</span>: Stock of properties, 2024.”</span> Available at: <a href="https://www.gov.uk/government/statistics/council-tax-stock-of-properties-2024">https://www.gov.uk/government/statistics/council-tax-stock-of-properties-2024</a> (Accessed: November 1, 2025).
</div>
<div id="ref-benjamin2025" class="csl-entry" role="listitem">
Benjamin, A. and Lynn, G. (2025) <span>“Landlords exposed flouting law on <span>Airbnb</span>,”</span> <em>BBC News</em>. Available at: <a href="https://www.bbc.co.uk/news/articles/cvg96rz9061o">https://www.bbc.co.uk/news/articles/cvg96rz9061o</a> (Accessed: December 3, 2025).
</div>
<div id="ref-cox2016" class="csl-entry" role="listitem">
Cox, M. and Slee, T. (2016) <span>“How <span>Airbnb</span>’s data hid the facts in <span>New</span> <span>York</span> <span>City</span>,”</span> <em>Inside Airbnb</em>. Available at: <a href="https://insideairbnb.com/reports/how-airbnbs-data-hid-the-facts-in-new-york-city.pdf">https://insideairbnb.com/reports/how-airbnbs-data-hid-the-facts-in-new-york-city.pdf</a> (Accessed: December 3, 2025).
</div>
<div id="ref-hedgecoe2025" class="csl-entry" role="listitem">
Hedgecoe, G. (2025) <span>“Spain clamps down on <span>Airbnb</span> as tourism backlash returns for summer,”</span> <em>BBC News</em>. Available at: <a href="https://www.bbc.co.uk/news/articles/c3wdd8lg581o">https://www.bbc.co.uk/news/articles/c3wdd8lg581o</a> (Accessed: December 11, 2025).
</div>
<div id="ref-insideairbnb" class="csl-entry" role="listitem">
InsideAirbnb (no date) <span>“Airbnb listings in <span>London</span>.”</span> Available at: <a href="https://insideairbnb.com/london/">https://insideairbnb.com/london/</a> (Accessed: June 15, 2025).
</div>
<div id="ref-jaffer2025" class="csl-entry" role="listitem">
Jaffer, K. (2025) <span>“What <span>London</span> <span>‘tourist tax’</span> would look like as <span>Sadiq</span> <span>Khan</span> issues verdict,”</span> <em>Hackney Citizen</em>. Available at: <a href="https://www.hackneycitizen.co.uk/2025/11/19/london-tourist-tax-sadiq-khan-verdict/">https://www.hackneycitizen.co.uk/2025/11/19/london-tourist-tax-sadiq-khan-verdict/</a> (Accessed: December 11, 2025).
</div>
<div id="ref-mayoroflondon2025" class="csl-entry" role="listitem">
London, M. of (2025) <span>“Supporting <span>London</span> to continue as the world’s best destination.”</span> Available at: <a href="https://www.london.gov.uk/who-we-are/what-london-assembly-does/questions-mayor/find-an-answer/supporting-london-continue-worlds-best-destination">https://www.london.gov.uk/who-we-are/what-london-assembly-does/questions-mayor/find-an-answer/supporting-london-continue-worlds-best-destination</a> (Accessed: December 11, 2025).
</div>
<div id="ref-mckiernan2025" class="csl-entry" role="listitem">
McKiernan, J. and Eardley, N. (2025) <span>“Homelessness <span>Minister</span> <span>Rushanara</span> <span>Ali</span> quits over rent hike claims,”</span> <em>BBC News</em>. Available at: <a href="https://www.bbc.co.uk/news/articles/clyd3l2x2n8o">https://www.bbc.co.uk/news/articles/clyd3l2x2n8o</a> (Accessed: December 11, 2025).
</div>
<div id="ref-mhclg2024" class="csl-entry" role="listitem">
MHCLG and Rayner, A. (2024) <span>“Housing targets increased to get <span>Britain</span> building again,”</span> <em>gov.uk</em>. Available at: <a href="https://www.gov.uk/government/news/housing-targets-increased-to-get-britain-building-again">https://www.gov.uk/government/news/housing-targets-increased-to-get-britain-building-again</a> (Accessed: December 11, 2025).
</div>
<div id="ref-remap2022" class="csl-entry" role="listitem">
REMAP (2022) <span>“<span>AirBnB</span> dependency: <span>The</span> women who rely on hosting to survive in <span>London</span>,”</span> <em>ReMAP blog <span>~</span> Research, Media Arts, Play</em>. Available at: <a href="https://reflect.ucl.ac.uk/remap-collaborative-blog/2022/06/27/airbnb-dependency-the-women-who-rely-on-hosting-to-survive-in-london/">https://reflect.ucl.ac.uk/remap-collaborative-blog/2022/06/27/airbnb-dependency-the-women-who-rely-on-hosting-to-survive-in-london/</a> (Accessed: December 11, 2025).
</div>
<div id="ref-todd2021" class="csl-entry" role="listitem">
Todd, J., Musah, A. and Cheshire, J. (2021) <span>“Assessing the impacts of <span>Airbnb</span> listings on <span>London</span> house prices,”</span> <em>Environment and Planning B: Urban Analytics and City Science</em>, 49(1), pp. 206–222. doi: <a href="https://doi.org/10.1177/23998083211001836">https://doi.org/10.1177/23998083211001836</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Inside Airbnb obtains public information on rentals available for booking at specific months through web-scraping which could contain errors or discrepancies. We further process the data to remove listings with duplicate IDs, or more than six null fields, which typically reflects the fact that entries have no reviews or incomplete information.  &nbsp;<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>We refer to the definitions of inner London / outer London boroughs as per <a href="https://www.legislation.gov.uk/uksi/1965/540/article/2/made">statutory definition</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Occupancy estimates obtained from Inside Airbnb. First, a review rate is used to compute reviews to estimated bookings. Thereafter, the average length of stay for London was multiplied by the estimated bookings for each listing giving the occupancy rate (out of 365 days). To estimate potential breaches, we look at the subset of listings that are “entire homes / apartments”, and the occupancy rate, which estimates how many nights the listing was booked in the last 365 days, providing a useful proxy for annual use, where raw daily calendar data are unavailable.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The occupancy model assumed (a) a review rate of 50% and (b) average length of stay of 3.1 days for London. This is conservative given that Airbnb previously cited an average review rate of 78%, and, community forums have cited a range of 33% and 85% for various properties.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>The median income for London taxpayers was £34,100 <a href="https://data.london.gov.uk/dataset/average-income-of-tax-payers-borough-2g1nq/">(London Datastore, 2023)</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Estimated revenues obtained from Inside Airbnb, which is computed as a function of price and occupancy estimates. We focus on the median which provides a more accurate measure of central tendency for revenues, given the skew created by luxury homes.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://www.bbc.co.uk/news/articles/ce910z9jd3po">Properties worth more than £2m in England face new mansion tax (BBC, 2025)</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Band D was chosen as it sits in the middle of valuation bands and best represents a typical tax without unfairly skewing towards low or high property values. This is aligned with methodology used by councils for statutory tax base computations.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>