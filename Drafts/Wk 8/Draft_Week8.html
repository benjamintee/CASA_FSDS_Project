<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-11-25">

<title>The Pythoneers’ Group Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="Draft_Week8_files/libs/clipboard/clipboard.min.js"></script>
<script src="Draft_Week8_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Draft_Week8_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Draft_Week8_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Draft_Week8_files/libs/quarto-html/popper.min.js"></script>
<script src="Draft_Week8_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Draft_Week8_files/libs/quarto-html/anchor.min.js"></script>
<link href="Draft_Week8_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Draft_Week8_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Draft_Week8_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Draft_Week8_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Draft_Week8_files/libs/bootstrap/bootstrap-1fbf936f5d115924c956bdfb76a204f2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#priorities-for-feedback" id="toc-priorities-for-feedback" class="nav-link active" data-scroll-target="#priorities-for-feedback">Priorities for Feedback</a></li>
  <li><a href="#briefing-on-airbnb-growth-trends-policy-implications" id="toc-briefing-on-airbnb-growth-trends-policy-implications" class="nav-link" data-scroll-target="#briefing-on-airbnb-growth-trends-policy-implications">Briefing on Airbnb Growth Trends &amp; Policy Implications</a>
  <ul class="collapse">
  <li><a href="#executive-summary" id="toc-executive-summary" class="nav-link" data-scroll-target="#executive-summary"><strong>Executive Summary</strong></a></li>
  <li><a href="#is-airbnb-out-of-control-in-london" id="toc-is-airbnb-out-of-control-in-london" class="nav-link" data-scroll-target="#is-airbnb-out-of-control-in-london"><strong>1. Is Airbnb ‘out of control’ in London?</strong></a></li>
  <li><a href="#how-many-professional-landlords-are-there" id="toc-how-many-professional-landlords-are-there" class="nav-link" data-scroll-target="#how-many-professional-landlords-are-there"><strong>2. How many professional landlords are there?</strong></a></li>
  <li><a href="#how-many-properties-would-be-affected-by-the-oppositions-proposal" id="toc-how-many-properties-would-be-affected-by-the-oppositions-proposal" class="nav-link" data-scroll-target="#how-many-properties-would-be-affected-by-the-oppositions-proposal"><strong>3. How many properties would be affected by the opposition’s proposal?</strong></a></li>
  <li><a href="#what-are-the-likely-pros-and-cons-of-the-oppositions-proposal-for-the-mayor-for-residents-and-for-the-city" id="toc-what-are-the-likely-pros-and-cons-of-the-oppositions-proposal-for-the-mayor-for-residents-and-for-the-city" class="nav-link" data-scroll-target="#what-are-the-likely-pros-and-cons-of-the-oppositions-proposal-for-the-mayor-for-residents-and-for-the-city"><strong>4. What are the likely pros and cons of the opposition’s proposal (for the Mayor, for residents, and for the city)?</strong></a></li>
  <li><a href="#can-the-story-be-reframed-as-a-positive-one-about-social-mobility-or-housing-opportunity" id="toc-can-the-story-be-reframed-as-a-positive-one-about-social-mobility-or-housing-opportunity" class="nav-link" data-scroll-target="#can-the-story-be-reframed-as-a-positive-one-about-social-mobility-or-housing-opportunity"><strong>5. Can the story be reframed as a positive one about social mobility or housing opportunity?</strong></a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="..\..\Draft_Week8.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Pythoneers’ Group Project</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 25, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="section" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="section"></h2>
</section>
<section id="declaration-of-authorship" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="declaration-of-authorship">Declaration of Authorship</h2>
<p>We, The Pythoneers, pledge our honour that the work presented in this assessment is our own. Where information has been derived from other sources, we confirm that this has been indicated in the work. Where a Large Language Model such as ChatGPT has been used we confirm that we have made its contribution to the final submission clear.</p>
<p>Date: 16 December 2025 (Tuesday)</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Names</th>
<th>Student Numbers</th>
<th>Contact Email</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Alice Southall</td>
<td>25120600</td>
<td>alice.southall.25@ucl.ac.uk</td>
</tr>
<tr class="even">
<td>Benjamin Tee</td>
<td>25049107</td>
<td>benjamin.tee.25@ucl.ac.uk</td>
</tr>
<tr class="odd">
<td>Bosco Choi</td>
<td>22040212</td>
<td>bosco.choi.22@ucl.ac.uk</td>
</tr>
<tr class="even">
<td>Owen Hughes</td>
<td>25197128</td>
<td>owen.hughes.25@ucl.ac.uk</td>
</tr>
<tr class="odd">
<td>Tong, C.Y</td>
<td>25244321</td>
<td>c.tong.25@ucl.ac.uk</td>
</tr>
</tbody>
</table>
</section>
<section id="priorities-for-feedback" class="level2">
<h2 class="anchored" data-anchor-id="priorities-for-feedback">Priorities for Feedback</h2>
<p>Are there any areas on which you would appreciate more detailed feedback if we’re able to offer it?</p>
<div style="page-break-after: always;"></div>
</section>
<section id="briefing-on-airbnb-growth-trends-policy-implications" class="level1">
<h1>Briefing on Airbnb Growth Trends &amp; Policy Implications</h1>
<section id="executive-summary" class="level2">
<h2 class="anchored" data-anchor-id="executive-summary"><strong>Executive Summary</strong></h2>
<p>This report provides an analysis of Airbnb activity in London in recent years (2021-2025), with a focus on 2025. Given time-sensitivity amidst the impending election, and a data-poor environment, we utilise appropriate data-driven approaches to provide insight into the following questions:</p>
<p>a.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Is Airbnb out of control in London?</p>
<p>b.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; How many professional landlords are there?</p>
<p>c.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; How many properties would be affected by the opposition’s proposal?</p>
<p>d.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; What are the benefits and trade-offs with the opposition’s proposal?</p>
<p>e.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; What are options to reframe the narrative to one about social mobility and housing opportunity?</p>
<section id="key-findings" class="level3">
<h3 class="anchored" data-anchor-id="key-findings">Key Findings</h3>
<p><em>(Insert findings in 2 column table)</em></p>
</section>
<section id="recommendations" class="level3">
<h3 class="anchored" data-anchor-id="recommendations">Recommendations</h3>
<p><em>(Insert recommendations here)</em></p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="is-airbnb-out-of-control-in-london" class="level2">
<h2 class="anchored" data-anchor-id="is-airbnb-out-of-control-in-london"><strong>1. Is Airbnb ‘out of control’ in London?</strong></h2>
<p>Opposition critics have suggested that the growth and spread of Airbnb’s in London has accelerated, with professional landlords rapidly accumulating properties, flouting rental restrictions to make a profit. This chapter provides a systematic analysis of the situation.&nbsp;</p>
<section id="what-is-the-growth-trend-in-airbnb-listings-across-london" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-growth-trend-in-airbnb-listings-across-london">1.1 What is the growth trend in Airbnb listings across London?</h4>
<ul>
<li><p>From 2021-2025, Airbnb listings across London<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> increased by <strong>25%</strong> from <strong>69,398 to 86,463 listings</strong>. <u>Figure 1.1</u> summarizes the spatial distribution and growth trends<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p></li>
<li><p>Overall growth was largely driven by a <strong>sharp increase in listings from 2022-2023 (↑24%),</strong> due to higher host registrations and marketing efforts. Growth rates over the last two years have moderated.</p></li>
</ul>
<div id="a3b5e951" class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-9-output-1.png" width="685" height="502" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="which-areas-saw-the-fastest-growth-in-airbnb-listings" class="level4">
<h4 class="anchored" data-anchor-id="which-areas-saw-the-fastest-growth-in-airbnb-listings">1.2 Which areas saw the fastest growth in Airbnb listings?</h4>
<ul>
<li>From 2021-2025, central areas of London generally saw larger increases. The borough of Westminster saw the <strong>largest increase (close to 40%)</strong> to reach <strong>10,588 listings in 2025</strong> (<u>Figure 1.2</u>).</li>
</ul>
<div id="a1be5326" class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-11-output-1.png" width="768" height="594" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="how-does-this-compare-to-changes-in-the-overall-housing-stock" class="level4">
<h4 class="anchored" data-anchor-id="how-does-this-compare-to-changes-in-the-overall-housing-stock">1.3 How does this compare to changes in the overall housing stock?</h4>
<ul>
<li>From 2020-2024, total housing stock in London only increased from <strong>3.68M</strong> to <strong>3.81M properties</strong> (<u>Figure 1.3</u>, data for 2025 unavailable), with a <strong>much slower growth rate of around 3.7%, over the last five years</strong>. Amidst robust demand and a tight housing market, the faster increase in properties for short-term rental relative to housing stock could have exacerbated pressures on housing prices and rents (<a href="https://discovery.ucl.ac.uk/id/eprint/10124650/7/Musah_23998083211001836.pdf">Todd, Musah &amp; Cheshire (2022)</a>).</li>
</ul>
<div id="bfbf3ae0" class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-14-output-1.png" width="765" height="612" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Inner London boroughs (orange bars in <u>Figure 1.4</u>) saw a higher ratio of increases in Airbnb listings compared to increases in housing stock</strong>. Kensington and Chelsea experienced listing growth that was 5 times that of housing stock growth and faced the largest impact of listings growth. &nbsp;</li>
</ul>
<div id="cef96236" class="cell" data-execution_count="15">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-16-output-1.png" width="765" height="612" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-is-the-situation-at-the-borough--and-msoa-levels-in-2025-are-issues-widespread-or-localised" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-situation-at-the-borough--and-msoa-levels-in-2025-are-issues-widespread-or-localised">1.4 What is the situation at the Borough- and MSOA-levels in 2025? Are issues widespread or localised?</h4>
<ul>
<li>At the borough-level (<u>Figure 1.5</u>), the <strong>proportion of Airbnb listings compared to the overall housing stock ranged from 0.2% to 5.8%</strong>, with Inner London boroughs having a higher share of listings relative to housing stock. &nbsp;</li>
</ul>
<div id="ea100beb" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-18-output-1.png" width="787" height="612" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>At the MSOA-level, it becomes clearer that there are pockets of concentration of listings relative to housing stock in these Boroughs, with <strong>up to 1 in 8 homes (12.5%)</strong> listed for Airbnb (<u>Figure 1.6</u>). This high proportion could be driving negative sentiments in some parts of London that Airbnb could be out of control.</li>
</ul>
<div id="10455212" class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-20-output-1.png" width="758" height="688" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="how-many-listings-potentially-breach-the-current-90-day-limit-for-rentals" class="level4">
<h4 class="anchored" data-anchor-id="how-many-listings-potentially-breach-the-current-90-day-limit-for-rentals">1.5 How many listings potentially breach the current 90-day limit for rentals?</h4>
<ul>
<li><p>Since 2017, London planning rules state that <em>entire homes</em> let on platforms such as Airbnb should not be used for short-term letting for more than <strong>90 nights per calendar year</strong>, without planning permission obtained. This prevents permanent housing from being converted into de facto holiday accommodation.</p></li>
<li><p>In 2025, <strong>57,558 or 67% of all listings</strong> were for “entire homes / apartments”. Based on occupancy estimates<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> , 12,081 entire homes / apartments were used for more than 90 nights per year. This represents <strong>more than 2 in 10 of all entire homes listings</strong>, and <strong>around 1 in 8 of all listings in London</strong> that were possibly in breach of this rule.</p></li>
<li><p>Notwithstanding, the sensitivity of the assumptions in Inside Airbnb’s methodology<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, we expect this estimate to be a conservative one, given reported <strong>likelihood of multiple listings of the same property</strong>, which some owners have used to circumvent the 90 day rule<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>.</p></li>
</ul>
<div id="870cce1b" class="cell" data-execution_count="21">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-22-output-1.png" width="784" height="497" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>There is a clear spatial pattern. Boroughs in inner London show the highest rates of intense use.</p>
<ul>
<li><p><strong>Westminster:</strong> <strong>25–26%</strong> of entire home listings have occupancy exceeding 90 nights</p></li>
<li><p><strong>Camden:</strong> about <strong>23%</strong></p></li>
<li><p><strong>Kensington and Chelsea:</strong> about <strong>21%</strong></p></li>
<li><p><strong>Hammersmith and Fulham, Islington, Southwark, Lambeth and the City of London</strong> all have <strong>18–21%</strong> of entire homes above 90 nights</p></li>
</ul>
</section>
<section id="taken-together-do-these-trends-suggest-a-problem-and-what-is-the-impact-on-communities" class="level4">
<h4 class="anchored" data-anchor-id="taken-together-do-these-trends-suggest-a-problem-and-what-is-the-impact-on-communities">1.6 Taken together, do these trends suggest a problem and what is the impact on communities?</h4>
</section>
</section>
<section id="how-many-professional-landlords-are-there" class="level2">
<h2 class="anchored" data-anchor-id="how-many-professional-landlords-are-there"><strong>2. How many professional landlords are there?</strong></h2>
<section id="what-is-the-distribution-of-airbnb-types-in-london" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-distribution-of-airbnb-types-in-london">2.1 What is the distribution of Airbnb types in London?</h4>
<div id="af1072f5" class="cell" data-execution_count="22">
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="Draft_Week8_files/figure-html/cell-23-output-1.png" width="701" height="469" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-is-the-difference-between-a-professional-landlord-and-a-commercial-landlord-does-this-matter-for-analysis" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-difference-between-a-professional-landlord-and-a-commercial-landlord-does-this-matter-for-analysis">2.2 What is the difference between a professional landlord and a commercial landlord? Does this matter for analysis?</h4>
</section>
<section id="how-many-hosts-own-2-or-more-airbnb-properties-and-the-distribution-of-the-number-of-listings-per-host" class="level4">
<h4 class="anchored" data-anchor-id="how-many-hosts-own-2-or-more-airbnb-properties-and-the-distribution-of-the-number-of-listings-per-host">2.3 How many hosts own 2 or more Airbnb properties and the distribution of the number of listings per host?</h4>
</section>
<section id="what-is-the-average-income-from-these-properties-and-how-does-it-compare-with-median-average-incomes-in-london" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-average-income-from-these-properties-and-how-does-it-compare-with-median-average-incomes-in-london">2.4 What is the average income from these properties, and how does it compare with median / average incomes in London?</h4>
</section>
<section id="what-is-the-profile-of-these-hosts" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-profile-of-these-hosts">2.5 What is the profile of these hosts ?</h4>
</section>
</section>
<section id="how-many-properties-would-be-affected-by-the-oppositions-proposal" class="level2">
<h2 class="anchored" data-anchor-id="how-many-properties-would-be-affected-by-the-oppositions-proposal"><strong>3. How many properties would be affected by the opposition’s proposal?</strong></h2>
</section>
<section id="what-are-the-likely-pros-and-cons-of-the-oppositions-proposal-for-the-mayor-for-residents-and-for-the-city" class="level2">
<h2 class="anchored" data-anchor-id="what-are-the-likely-pros-and-cons-of-the-oppositions-proposal-for-the-mayor-for-residents-and-for-the-city"><strong>4. What are the likely pros and cons of the opposition’s proposal (for the Mayor, for residents, and for the city)?</strong></h2>
</section>
<section id="can-the-story-be-reframed-as-a-positive-one-about-social-mobility-or-housing-opportunity" class="level2">
<h2 class="anchored" data-anchor-id="can-the-story-be-reframed-as-a-positive-one-about-social-mobility-or-housing-opportunity"><strong>5. Can the story be reframed as a positive one about social mobility or housing opportunity?</strong></h2>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Data compiled from Inside Airbnb (<a href="http://insideairbnb.com/">http://insideairbnb.com</a>) which uses public information on the rental outlets available for booking at specific months in each year.&nbsp; While owners have exercised care with the processing cleaning and analysis, this dataset is the best publicly available estimate of Airbnb listings. We further process the data to remove listings with duplicate IDs, or more than six null fields, which typically reflects the fact that these entries have no reviews or incomplete information. &nbsp;<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Given longitudinal analysis limitations, data does not include listings which dropped off from year to year.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Occupancy estimates are obtained from Inside Airbnb data. First, a review rate is used to compute reviews to estimated bookings. Thereafter, the average length of stay for London was multiplied by the estimated bookings for each listing giving the occupancy rate (out of 365 days). To estimate potential breaches, we look at the subset of listings that are “entire homes / apartments”, and the occupancy rate, which estimates how many nights the listing was booked in the last 365 days, providing a useful proxy for annual use, where raw daily calendar data are unavailable.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The occupancy model assumed (a) a review rate of 50% and (b) average length of stay of 3.1 days for London. This is conservative given that Airbnb previously cited an average review rate of 78%, and, community forums have cited a range of 33% and 85% for various properties.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>BBC journalists found about 1,300 listings had reused identical images - such as the same furniture, rooms and decor - from other supposedly unique listing. <a href="https://www.bbc.co.uk/news/articles/cvg96rz9061o" class="uri">https://www.bbc.co.uk/news/articles/cvg96rz9061o</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>