---
title: "Owen_Week7_Code"
format: html
editor: visual
---

# Week 7 Code

## Questions to Answer

**1. What is the share of Airbnbs in London that are entire homes or apartments?**

-   Use pandas to group listings by type

-   Create a plot showing percent and totals

**2. How many professional landlords are there in London?**

-   What is the difference between a professional landlord and a commercial landlord?

    -   Does this difference matter for out analysis

-   Start by analyzing anyone/organization that owns more than 5 Airbnbs

    -   group Airbnbs by host and count listings per host

-   Income from these properties vs. median income in London

--------------------------------------------------------------------------------------------------------------------

**Data setup**

Load the pandas package and data

```{python}
import pandas as pd
```

```{python}
df = pd.read_csv("C:/Users/Owen Hughes/Desktop/CASA/UCL_Work/CASA_FSDS_Project/Data/clean/20250615-London-listings.csv/20250615-London-listings.csv")

df.head(4)
```

--------------------------------------------------------------------------------------------------------------------

**1. What is the share of Airbnbs in London that are entire homes or apartments?**

-   The most useful column for this analysis is room_type as groups and counts can be made to determine the proportion of Airbnbs that are entire houses or flats. Additionally, the length of the data set will used to calculate said proportion.

```{python}
# attain length of data set for calculation of proportion
df_length = len(df)
print(df_length)
```

```{python}
# run a for loop to create a new data set with only entire homes apartments 
# take the length of this

print(df["room_type"].unique())

entire_homes = []
for i, r in df.iterrows():
  if r["room_type"] == "Entire home/apt":
    entire_homes.append(r)
  
entire_homes_df = pd.DataFrame(entire_homes) # Ensure data is still a pandas df

eh_length = len(entire_homes_df)
print(eh_length)
```

```{python}
# Find the proportion of Airbnbs that are entire homes
print(f'Rounghly {round((eh_length/df_length)*100)}% of Airbnbs in London are entire homes or flats.')
```

From this simple analysis alone, we see that Airbnb certainly has a tendency to attract entire homes and apartments as its primary form of short term rental housing. Whether this is purposeful from the company cannot be determined from this analysis, though 57,168 entire homes and apartments that could be used for full time residant housing will certainly have an effect on the housing market.

Now I want to display in a bar chart and a pie chart the total counts of each room type and their proportions.

```{python}
import matplotlib.pyplot as plt
```

```{python}

room_types = df["room_type"].value_counts()

# The next lines come from Geeks for Geeks
# Function to add value labels on top of bars
def add_labels(x, y):
    for i in range(len(x)):
        plt.text(i, y[i], y[i], ha='center', 
                 bbox=dict(facecolor='#ABD7EB', alpha=0.8))

x = ["Entire home/apt", "Private room", "Shared room", "Hotel room"]
y = [57168, 28367, 180, 101]

plt.figure(figsize=(10, 5))
plt.bar(x,y, color = "salmon")
add_labels(x,y)
# Adding title and labels
plt.title("Airbnb Types in London")
plt.xlabel("Room Types")
plt.ylabel("Count")

# Display the chart
plt.show()
```

```{python}

room_counts = df["room_type"].value_counts()

# Plot
plt.figure(figsize=(6, 6))
plt.pie(room_counts, labels=room_counts.index, autopct="%1.1f%%", startangle=90, colors=["#ABD7EB", "#F4A261", "#E76F51", "#2A9D8F"])
plt.title("Proportion of Room Types in London Listings")
plt.axis("equal")  # Ensures pie is a circle
plt.show()

```
